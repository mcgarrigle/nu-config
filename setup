#!/usr/bin/env nu

def copy [file, dir ] {
  print $"copy ($file.name) ($dir)"
  cp $file.name $dir
}

# -------------------------------------------------

let scripts_dir  = $nu.default-config-dir | path join "scripts"
let autoload_dir = $nu.user-autoload-dirs.0

mkdir $autoload_dir
mkdir $scripts_dir

ls config/*   | each { |file| copy $file $nu.default-config-dir }
ls autoload/* | each { |file| copy $file $autoload_dir }
ls scripts/*  | each { |file| copy $file $scripts_dir }

/usr/libexec/nushell/post-install.nu

null
